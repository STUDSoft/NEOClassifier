package main;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class Connector {

	public static void main(String[] args) {
		
		Thread t=new Thread(new Runnable() {
			
			@Override
			public void run() {
				
				try {
					ServerSocket ss=new ServerSocket(6024);
					System.out.println("running");
					
					Socket s = ss.accept();
					System.out.println("accepted");
					
					ObjectInputStream ois=new ObjectInputStream(s.getInputStream());
					
					byte [] buffer= (byte[]) ois.readObject();
					FileOutputStream file=new FileOutputStream("C:\\Users\\Daniele\\Downloads\\Universita\\img.png");
					file.write(buffer);
					
					file.close();
					ois.close();
					s.close();
					ss.close();
					
				}
				catch(IOException e) {
					e.printStackTrace();
				} 
				catch (ClassNotFoundException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
			}
		});
		
	}
	
}
